/*! sugarkick. ver:0.1.0 2014-03-26 */
"use strict";var sugarkick=sugarkick||{};sugarkick.$$config=sugarkick.$$config||{},sugarkick.$views=sugarkick.$views||{},sugarkick.$controllers=sugarkick.$controllers||{},sugarkick.routes=sugarkick.routes||{};var request;sugarkick.load=function(){return sugarkick.$$config.appView=document.getElementById("sugar-view"),window.addEventListener("hashchange",sugarkick.router),sugarkick},sugarkick.$$config.load=function(a,b){return request=new XMLHttpRequest,request.open("GET",a,!0),request.onload=function(){this.status>=200&&this.status<400?(sugarkick.$views[b].template=this.responseText,sugarkick.router()):console.error("Partial Load Error.")},request.onerror=function(){console.error("request error.")},request.send(),request.responseText},sugarkick.router=function(){var a=window.location.hash.replace("#!","").replace(/\//g,"_");return a&&sugarkick.$views[a]?(document.getElementById("sugar-view").innerHTML=sugarkick.$views[a].template,sugarkick.$controllers[sugarkick.$views[a].controller]()):console.log("Hashbang does not match route"),sugarkick},sugarkick.when=function(a,b){return sugarkick.$views[a.replace(/\//g,"_")]={route:a,controller:b.controller,template:"loading..."},sugarkick.$$config.load(b.template,a.replace(/\//g,"_")),sugarkick.$$config[this.$$appView]},sugarkick.controller=function(a,b){sugarkick.$controllers[a]=b},sugarkick.module=function(a){return sugarkick.$$config[a]={template:!1,when:sugarkick.when,$$appView:a},sugarkick.$$config[a]},window.addEventListener("load",sugarkick.load);